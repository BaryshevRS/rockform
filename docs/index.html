<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
 
    <meta name="robots" content="noindex, nofollow" />
    <title>Rockform: форма обратной связи</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel=stylesheet>
    <link href="assets/css/docs.min.css" rel=stylesheet>
</head>

<body>
 
    <div class="container bs-docs-container ">

        <div class=row>
            <div class=col-md-9 role=main>
  

                <div class=bs-docs-section>
                 <h1 class="page-header" id="overview">Rockform: форма обратной связи</h1>
                    
                    <h3 id="description">Описание</h3>
                    <p>Основные характеристики формы:</p>
                    <ol>
                        <li>Встроенная защита от спама, поддержка капчи.</li>
                        <li>Работа через SMTP.</li> 
                        <li>Поддержка всплывающей формы.</li> 
                        <li>Поддержка валидации, тултипы, настройка масок ввода.</li> 
                    </ol>
                    <h3 id="system-requirements">Системные требования</h3>
                    <ul>
                            <li>Работает с PHP 5.2 и выше.</li>
                            <li>Jquery >= 1.9+</li>
                            <li>Браузеры: ie9+</li>
                    </ul>
                </div>
                <div class=bs-docs-section>
                    <h2 class="page-header" id="example">Примеры</h2>
                    <h3>Простое модальное окно</h3>
                    <p>
                        <a class="btn btn-lg btn-default" data-bf-config="" href="#">Запустить пример</a>
                    </p>
                    <hr>
                    <h3>Модальное окно заказа обратного звонка</h3>
                    <p>
                        <a class="btn btn-lg btn-default" data-bf-config="order_phone" href="#">Заказать звонок</a>
                    </p>
                    <hr>
                    <div class="bf-content">
                        <div class="bf-header">
                            Заказ звонка
                        </div>
                        <form data-bf-config="order_phone" action="#" method="post">
                            <div class="bf-row">
                                <label> Имя :</label>
                                <input placeholder="" class="bf-form-control" name="name"    type="text" value="" />
                            </div>
                            <div class="bf-row">
                                <label> Телефон<span>*</span>:</label>
                                <input   data-bf-mask="+7 (000) 000-00-00" placeholder="+7 (___) ___-__-__" class="bf-form-control" name="phone" type="text" value="" />
                            </div>
                            <div class="bf-rule">
            <label for="">
                <input checked="" name="rule" type="checkbox"><span>Согласен на</span> <a data-bf-field_form="order_phone" data-bf-config="rule" href="#">обработку персональных данных</a>
            </label>
        </div>
                            <div class="bf-row">
                                <input class="btn btn-default bf-right" name="submit" type="submit" value="Отправить" />
                            </div>
                        </form>
                    </div>
                    <div style="clear: both;"></div>
                </div>
                <div class=bs-docs-section>
                    <h2 class="page-header" id="install">Установка</h2>
                    <h3 id="how-install">Как подключить скрипт</h3>

                    <p>Для установки нужно подключить скрипты в указанной последовательности:</p>
                <pre><code>&lt;!-- Rockform --&gt;
    &lt;link href="/rockform/core/themes/default/main.css" type="text/css" rel="stylesheet" /&gt;
    &lt;script src="/rockform/core/frontend/jquery.min.js"&gt;&lt;/script&gt;
    &lt;script src="/rockform/core/frontend/jquery.mask.min.js"&gt;&lt;/script&gt;
    &lt;script src="/rockform/core/frontend/jquery.form.min.js"&gt;&lt;/script&gt;
    &lt;script src="/rockform/core/frontend/jquery.rtooltip.js"&gt;&lt;/script&gt;
    &lt;script src="/rockform/core/frontend/jquery.rmodal.js"&gt;&lt;/script&gt;
    &lt;script src="/rockform/core/frontend/baseform.min.js"&gt;&lt;/script&gt;
&lt;!-- // Rockform --&gt;
</code></pre>    


  

                    <h3 id="built-form">Для встроенной формы</h3>
                    <p>Для подключения существующей формы на странице достаточно тегу <code>form</code> добавить атрибут с названием конфигурации <code>data-bf-config="Название_конфигурации"</code>. </p>
                    <p> Можно оставить пустым, тогда конфигурация возьмётся из настроек по умолчанию:
                        <code>/core/config/config.ini.php</code>. </p>

                    <h3 id="popup-form">Для всплывающего окна</h3>

                    <p>Для начала нужно настроить шаблон, который можно найти в папке <code>/configs/example/templates/popup.html</code>. В него можно передать любой html-код с формой, он подхватится автоматически. Работает с поддержкой шаблонизатора Twig.</p>

                    <p>Для вызова всплывающего окна нужно добавить атрибут <code>data-bf-config=""</code> на любой тег, кроме формы.</p>

                    <p>В всплывающую форму можно передать параметры через data-атрибуты, например: <code>data-bf-field_title="Параметр"</code></p>

                    <p>Где <code>title</code> можно заменить на своё название.</p>
                    <div id="callout-overview-single-data" class="bs-callout bs-callout-danger">
                        <p>Стоит учесть, что здесь обязательно нужно использовать нижнее подчёркивание.</p>
                    </div>

                    <p>Переданная переменная будет доступна в шаблонах как: <code>{{field_title}}</code>.</p>

                </div>
                <div class=bs-docs-section>
                    <h2 class="page-header" id="template">Шаблоны</h2>

                    <h3 id="template-on-mail"> Шаблон отправки на почту</h3>

                    <p>Шаблон лежит в папке выбранного конфига <code>/templates/report.html</code>.</p>
                    <p>В качестве шаблона для полей используется конструкция <code>{{название_поля_ввода}}</code>. Поддерживает работу с шаблонизатором Twig.</p>
                    <p>Также доступны системные переменные: </p>
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped bs-events-table">
                            <thead>
                                <tr>
                                    <th>Переменная</th>
                                    <th>Описание</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{field_page_link}}</td>
                                    <td>Адрес страницы оформления формы.</td>
                                </tr>
                                <tr>
                                    <td>{{field_page_h1}}</td>
                                    <td>Тег <code>h1</code> страницы оформления формы.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>


                    <h3 id="template-popup">Шаблон всплывающего окна</h3>
                    <p>Шаблон лежит в папке выбранного конфига <code>/templates/popup.html</code>.</p>

<!--
                     <div class="bs-callout bs-callout-info" id="callout-overview-single-data">
                        <p>Для закрытия окна по кнопке из формы - ей нужно добавить атрибут <code>data-bf-popup='close'</code></p>
                    </div>
-->

                    <h3 id="template-success">Шаблон ответа об успешной отправке
                    </h3>
                    <p>Шаблон лежит в папке выбранного конфига
                        <code>/templates/success.html</code>.
                    </p>

                    <div class="bs-callout bs-callout-danger" id="callout-overview-single-data">
                        <p>Стоит учесть, что здесь обязательно нужно добавить атрибут <code>data-bf-success</code> в тег обёртки шаблона.</p>
                    </div>
         
                </div>
                <div class=bs-docs-section>
                    <h2 class="page-header" id="settings">Настройки</h2>

                    <h3 id="settings-how">Как задать настройки</h3>

                    <p>Настройки хранятся в формате <code>.ini</code>. По умолчанию, при пустом вызове, настройки берутся из <code>/config/config.ini.php</code>.</p>
                    <figure class=" ">

                    <pre><code data-lang="bash" class="language-bash">rockform/
    └── config
        ├── templates
        │	├── popup.html
        │	├── success.html
        │	└── report.html
        └─── config.ini.php
     </code></pre></figure>
     <p>Дополнительные конфигурации можно создавать в папке <code>/configs/</code>.</p>
                    <p> Можно создать сколько угодно конфигураций, просто копируя <code>/configs/example/</code> с другим названием и меняя параметры на свои.</p>

                    <div id="callout-scrollspy-needs-nav" class="bs-callout bs-callout-warning">
                        <p>Стоит отметить, что конфигурации наследуются от <code>/config/config.ini.php</code>, поэтому можно опускать почту и другие повторяющиеся параметры. Не наследуется только секция валидации.</p>
                    </div>


                    <h3 id="settings-available"> Доступные настройки</h3>
                    
                    <p>Для настроек можно использовать названия полей из формы и суперглобальный массив <a href="http://php.net/manual/ru/reserved.variables.server.php">$_SERVER</a>.</p>

                    <p>Например: <code>subject = 'Письмо от {{username}}'</code>. Где <code>username</code>, - это значение атрибута поля ввода <code>name="username"</code>.</p>

                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <th>Параметр</th>
                                <th>Значение по умолчанию</th>
                                <th>Пример</th>
                              
                                <th>Описание</th>
                            </tr>
                            <tr>
                                <td>mail_to</td>
                           
                                <td></td>
                                  <td>username@yandex.ru(Первый получатель)</td>
                                <td>

<b>Поле обязательно.</b>
                                Почта получателей. Можно несколько через запятую. Имя в скобочках опционально.</td>
                            </tr>
                            <tr>
                                <td>mail_subject </td>
                                <td>Письмо с сайта</td>
                                <td></td>
                            
                                <td>Заголовок письма.</td>
                            </tr>
                            <tr>
                                <td>mail_from</td>
                                <td>from@{{SERVER_NAME}}</td>
                                <td>username@yandex.ru</td>
                                 
                                <td>Почта, которая будет указана в качестве адреса отправителя. Совпадает с пользователем SMTP.</td>
                            </tr>
                            <tr>
                                <td>mail_from_name</td>
                                <td>Из {{SERVER_NAME}}</td>
                                <td></td>
                             
                                <td>Имя или название источника отправителя.</td>
                            </tr>
                             <tr>
                                <td>mail_disable_send</td>
                                <td>0</td>
                                <td></td>
                                
                                <td>Не отправлять на почту (0 или 1)</td>
                            </tr>

                             <tr>
                                <td>mail_add_cc</td>
                                <td>username@yandex.ru(Первый получатель)</td>
                                <td></td>
                                
                                <td>Добавить получателей точной копии (CC).  Можно несколько через запятую. Имя в скобочках опционально.</td>
                            </tr>

                            <tr>
                                <td>mail_add_bcc</td>
                                <td>username@yandex.ru(Первый получатель)</td>
                                <td></td>
                              
                                <td>Добавить получателей скрытой копии (BCC).  Можно несколько через запятую. Имя в скобочках опционально.</td>
                            </tr>

                            <tr>
                                <td>mail_reply_to</td>
                                <td>username@yandex.ru(Первый получатель)</td>
                                <td></td>
                               
                                <td>Добавление адреса для ответа (Reply-To).  Можно несколько через запятую. Имя в скобочках опционально.</td>
                            </tr>
                  
                            <tr>
                                <td>mail_confirm_reading_to</td>
                            
                                <td></td>
                                    <td>username@yandex.ru</td>
                                <td>Требование подтверждения прочтения.</td>
                            </tr>
         
                            <tr>
                                <td>mail_smtp_host</td>
                                <td></td>
                                <td>smtp.yandex.ru</td>
                               
                                <td><span style="display: none;">Specify main and backup SMTP servers</span> Адрес SMTP сервера</td>
                            </tr>
                            <tr>
                                <td>mail_smtp_auth</td>
                                <td></td>
                                <td>true</td>
                             
                                <td><span style="display: none;">Enable SMTP authentication</span>Включение SMTP авторизации </td>
                            </tr>
                            <tr>
                                <td>mail_smtp_username</td>
                                <td></td>
                                <td>your_mail@yandex.ru</td>
                               
                                <td><span style="display: none;">SMTP username</span> SMTP пользователь </td>
                            </tr>
                            <tr>
                                <td>mail_smtp_password</td>
                                <td></td>
                                <td></td>
                            
                                <td><span style="display: none;">SMTP password </span>SMTP пароль </td>
                            </tr>
                            <tr>
                                <td>mail_smtp_secure</td>
                                <td>ssl</td>
                                <td>ssl</td>
                          
                                <td>
                                    Включение шифрования TLS, также доступен `ssl` </td>
                            </tr>
                            <tr>
                                <td>mail_smtp_port</td>
                                <td>465</td>
                                <td>465</td>
                                
                                <td> TCP порт</td>
                            </tr>
                                  <tr>
                                <td>lexicon</td>
                                <td>default</td>
                                <td></td>
                          
                                <td>Название файла локализации в папке <code>/core/lexicon/</code>.</td>
                            </tr>
                              <tr>
                                <td>charset</td>
                                <td>utf-8</td>
                                <td></td>
                                
                                <td>Кодировка</td>
                            </tr>
                    </table>
                    <h3 id="validation"> Валидация </h3>
                    <p>Для включения валидации полей, надо в конфигурационом файле добавить секцию <code>[validation]</code>.</p>
                    <p>Затем перечислить названия полей и атрибуты валидации к ним.</p>
                    <p>Пример: <code>name_user = 'required,minlength[3],words'</code>. Это будет означать, что атрибут <code>name</code> со значением - <code>name_user</code> будет обязателен для заполнения, минимальное допустимое число символов будет 3 и на вход должны быть переданы только слова.</p>
                    <table class="table table-bordered">
                        <caption>Атрибуты валидации</caption>
                        <tbody>
                            <tr>
                                <th>Выражение</th>
                                <th>Описание</th>
                            </tr>
                            <tr>
                                <td>required</td>
                                <td>Поле становится обязательным для заполнения.</td>
                            </tr>
                            <tr>
                                <td>minlength[1]</td>
                                <td>Минимальное число символов. В скобочках указывается значение.</td>
                            </tr>
                            <tr>
                                <td>maxlength[10]</td>
                                <td>Максимально число символов. В скобочках указывается значение.</td>
                            </tr>
                            <tr>
                                <td>rangelength[1,10]</td>
                                <td>Диапозон числа символов. В скобочках указывается значение.</td>
                            </tr>
                            <tr>
                                <td>email</td>
                                <td>Электронная почта.</td>
                            </tr>
                            <tr>
                                <td>url</td>
                                <td>Ссылка.</td>
                            </tr>
                            <tr>
                                <td>ip</td>
                                <td>ip-адрес.</td>
                            </tr>
                            <tr>
                                <td>number</td>
                                <td>Дробные числа.</td>
                            </tr>
                            <tr>
                                <td>digits</td>
                                <td>Только цифры.</td>
                            </tr>
                            <tr>
                                <td>letter</td>
                                <td>Только буквы.</td>
                            </tr>
                            <tr>
                                <td>words</td>
                                <td>Ввод слов.</td>
                            </tr>

                            
                            <tr>
                                <td>filesize[1048576]</td>
                                <td>Допустимый размер файлов. В скобочках размер в байтах (1048576 = 1 мегабайт).</td>
                            </tr>
                            <tr>
                                <td>file[.jpg,.png]</td>
                                <td>Допустимые расширения файлов. В скобочках расширения через запятую.</td>
                            </tr>
                    </table>
                    <h3 id="tooltip"> Всплывающие подсказки </h3>
                    <p>Существует поддержка настройки позиции всплывающих подсказок. Атрибут <code>data-bf-tooltip=""</code> 
                    можно задать, как глобально для тега <code>form</code>, так и индивидуально для каждого элемента полей ввода.</p>
                    <table class="table table-bordered ">
                        <caption>Доступны следующие атрибуты </caption>
                        <tbody>
                            <tr>
                                <th>Выражение</th> 
                                <th>Описание</th>
                            </tr>
                            <tr>
                                <td>top-right</td>
                               
                                <td>Сверху справа</td>
                            </tr>
                            <tr>
                                <td>top-center</td> 
                                <td>Сверху по центру</td>
                            </tr>
                            
                            <tr>
                                <td>top</td> 
                                <td>Сверху</td>
                            </tr>

                            <tr>
                                <td>top-left</td> 
                                <td>Сверху слева</td>
                            </tr>
                            <tr>
                                <td>bottom</td> 
                                <td>Снизу</td>
                            </tr>
                            <tr>
                                <td>bottom-left</td> 
                                <td>Снизу слева</td>
                            </tr>
                               
                            <tr>
                                <td>bottom-right</td> 
                                <td>Снизу справа</td>
                            </tr>

                             <tr>
                                <td>bottom-center</td> 
                                <td>Снизу по центру</td>
                            </tr>
                       
                            <tr>
                                <td>left</td> 
                                <td>Слева</td>
                            </tr>  
                            
                            <tr>
                                <td>
                                    right</td> 
                                <td>Справа</td>  
                            </tr>
                    </table>
                    <h3 id="mask"> Маски ввода </h3>
                    <p>В форме доступны два атрибута для настроек масок: </p>
                    <p>1. <code>data-bf-mask</code> принимает на вход выражения из таблицы ниже.
                        <table class="table table-bordered">
                            <caption>Доступны следующие атрибуты маски</caption>
                            <tbody>
                                <tr>
                                    <th>Выражение</th>
                                    <th>Описание</th>
                                </tr>
                                <tr>
                                    <td>A</td>
                                    <td>Только буквы</td>
                                </tr>
                                <tr>
                                    <td>0</td>
                                    <td>Только цифры</td>
                                </tr>
                                <tr>
                                    <td>S</td>
                                    <td>Только буквы и цифры</td>
                                </tr>
                            </tbody>
                        </table>

                        <p class="text-muted">Пример</p>
                        <pre><code>data-bf-mask="+7 (000) 000-00-00" </code></pre>
                        <p>2. <code>placeholder</code> - плейсхолдер, формируется автоматически, но если в плейсхолдере есть цифры или буквы, тогда нужно задать явно через этот атрибут.</p>
                        <p class="text-muted">Пример</p>
                        <pre><code>placeholder="+7 (___) ___-__-__" </code></pre>
                        <p>Для работы используется плагин <a href="https://igorescobar.github.io/jQuery-Mask-Plugin/">jQuery-Mask-Plugin</a></p>


                        <h3 id="capcha">Добавление капчи</h3>
                        <p>1. Для добавления капчи нужно картинке присвоить атрибут -
                            <code>data-bf-capcha</code>.</p>
                        <p>2. В конфигурационном файле указать в секции <code>[validation]</code> параметр
                            <code>bf_capcha = capcha;</code>. Где <code>bf_capcha</code> - значение атрибута <code>name</code> для поля, в который будет вводиться информация с картинки.</p>
                        <p class="text-muted">Пример</p>
                        <pre>&lt;div class="bf-row"&gt;
    &lt;div class="bf-info-img"&gt;
    &lt;img width="100" height="50" title="Обновить картинку" data-bf-capcha src="" alt="" /&gt;
    &lt;/div&gt;
    &lt;input class="capcha bf-form-control" name="bf_capcha" placeholder="Код с картинки" type="text" value="" /&gt;
&lt;/div&gt;</pre>

 <h3 id="politica">Политика конфиденциальности</h3>

 <p>Для создания всплывающего окна с политикой конфиденциальности достаточно создать отдельный конфиг, где в шаблоне 
<code>popup.html</code> указать нужный текст. Вызывать его аналогично, как и другие всплывающие формы, т.е через <code>data-bf-config="НАЗВАНИЕ_КОНФИГА"</code>, но также требуется добавить атрибут дополнительного поля, например: <code>data-bf-field_form="НАЗВАНИЕ_КОНФИГА"</code></p> 

<p>Для возврата в конфиг, с которого был переход на политику, надо создать ссылку с атрибутом <code>data-bf-config="{{field_form}}"</code>. Если требуется закрыть окно с политикой, то ссылке надо добавить атрибут <code>data-bf-popup="close"</code>.


</p>

 

                </div>


                   <div class=bs-docs-section>
                    <h2 class="page-header" id="localization">Локализация</h2>
<p>Файл для локализаций лежит в <code>/core/lexicon/default.ini</code>. Значения в этом файле можно переопределить на своё усмотрение или скопировать в файл с другим названием. Нaпример в <code>/core/lexicon/en.ini.</code></p>

<p>Установить новый файл локализаций можно через опцию <code>lexicon</code> в конфигурации, передав название нового файла. Для примера выше, это будет выглядеть так: <code>lexicon = en</code>.</p> 
                
           
                </div>


                <div class=bs-docs-section>
                    <h2 class="page-header" id="expansion">Класс расширения PHP</h2>

                    <p>Для расширения фунциональности, например для записи данных из формы в базу данных, существует класс расширения.</p>
                    <p>Класс примера можно найти в <code>/configs/example/events.php</code> (файл можно скопировать в любой другой конфиг).</p>
                    <p>Методы класса срабатывают только при вызове данного конфига.</p>
 
  <table class="table table-bordered">
                            <caption>Доступны следующие события</caption>
                            <tbody>
                            <tr><th>Событие</th><th>Описание</th></tr>

                                <tr>
                                    <td>before_show_modal</td>
                                    <td>Срабатывает до показа всплывающей формы.</td>
                                </tr>
                                <tr>
                                    <td>before_success_modal</td>
                                    <td>Срабатывает до показа формы об успешной отправке.</td>
                                </tr>
                                <tr>
                                    <td>before_success_send_form</td>
                                    <td>Срабатывает перед успешной отправкой формы.</td>
                                </tr>
                                <tr>
                                    <td>after_success_send_form</td>
                                    <td>Срабатывает после успешной отправки формы.</td>
                                </tr>
                            </tbody>
                        </table>


                </div>


            </div>

            <div class=col-md-3 role=complementary>
                <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
               
                    <ul class="nav bs-docs-sidenav">
                        <li><a href="#overview"> Обзор</a>
                            <ul class=nav>
                                <li><a href="#description">Описание</a></li>
                                <li><a href="#system-requirements">Системные требования</a></li>
                            </ul>
                        </li>
                        <li><a href="#example"> Примеры</a></li>
                        <li><a href="#install"> Установка</a>
                            <ul class=nav>
                                <li><a href="#how-install">Как подключить скрипт</a></li>
                                <li><a href="#built-form">Для встроенной формы</a></li>
                                <li><a href="#popup-form">Для всплывающего окна</a></li>
                            </ul>
                        </li>
                        <li><a href="#template">Шаблоны</a>
                            <ul class=nav>
                                <li><a href="#template-on-mail">Шаблон отправки на почту</a></li>
                                <li><a href="#template-popup">Шаблон всплывающего окна</a></li>
                                <li><a href="#template-success">Шаблон успешной отправки</a></li>
                            </ul>
                        </li>
                        <li><a href="#settings"> Настройки </a>
                            <ul class=nav>
                                <li><a href="#settings-how">Как задать настройки</a></li>
                                <li><a href="#settings-available">Доступные настройки</a></li>
                                <li><a href="#validation">Валидация</a></li>
                                <li><a href="#tooltip">Всплывающие подсказки</a></li>
                                <li><a href="#mask">Маски ввода</a></li>
                                <li><a href="#capcha">Добавление капчи</a></li>
                                <li><a href="#politica">Политика конфиденциальности</a></li>
                                
                            </ul>
                        </li>
                         
                         <li><a href="#localization">Локализация</a></li>
                        <li><a href="#expansion">Расширение функциональности</a></li>
                    </ul>
                    <a class="back-to-top" href="#top"> Наверх </a> </nav>
            </div>
        </div>
    </div>
    </div>
    <footer  role=contentinfo>
        <div class=container>
        </div>
    </footer>
    <script src=https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js></script>
 
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="assets/js/docs.min.js"></script>

    <!-- Rockform -->
    <link href="/rockform/core/themes/default/main.css" type="text/css" rel="stylesheet" />
    <script src="/rockform/core/frontend/jquery.min.js"></script>
    <script src="/rockform/core/frontend/jquery.mask.min.js"></script>
    <script src="/rockform/core/frontend/jquery.form.min.js"></script>
    <script src="/rockform/core/frontend/jquery.rtooltip.js"></script>
    <script src="/rockform/core/frontend/jquery.rmodal.js"></script>
    <script src="/rockform/core/frontend/baseform.js"></script>
    <!-- // Rockform -->


    <!--[if lt IE 8]> 
         <script src="/rockform/core/frontend/json2.js"></script>
       <link href="/rockform/core/themes/default/ie.css" type="text/css" rel="stylesheet" />
     <![endif]-->
</body>

</html>
