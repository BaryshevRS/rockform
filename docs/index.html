<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="robots" content="noindex, nofollow" />
    <title>Демонстрация работы</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" type="text/css" rel="stylesheet" />
    <!-- Rockform -->
    <link href="/rockform/frontend/themes/default/main.css" type="text/css" rel="stylesheet" />
    <script data-main="/rockform/frontend/lib/app" src="/rockform/frontend/lib/require.min.js"></script>
    <!-- // Rockform -->
     
</head>

<body>
    <div class="container">
        <div class="page-header">
            <h1>Rockform</h1>
            <p class="lead">Документация и демонстрация работы.</p>
        </div>
      
        <h3>Простое модальное окно</h3>
        <p>
            <a class="btn btn-lg btn-default" data-bf-config="" href="#">Запустить пример</a>
        </p>
        <hr>
        <h3>Модальное окно с параметром</h3>
        <p>
            <a class="btn btn-lg btn-default" data-bf-field_title="Переданный параметр" data-bf-config="test" href="#">Запустить пример</a>
        </p>
 


 


        <hr>
        <h3>Встроенная форма с клиентской валидацией</h3>
        <br />
        <div class="bf-content">
            <div class="bf-header">
                Форма отправки сообщения!
            </div>
            <form  data-bf-config="123" action="" method="post">
                <div class="bf-row">
                    <label>Имя:</label>
                    <input data-bf-valid-required="1" data-bf-valid-pattern="^[А-Яа-яЁё\s]{5,}$" data-bf-valid-error-msg="Пожалуйста, введите не менее 5 букв!"  class="bf-form-control"  name="name" placeholder="Обязательное поле" type="text" value="" />
                </div>
                <div class="bf-row">
                    <label>Телефон:</label>
                    <input data-bf-valid-required="1" data-bf-valid-pattern="^\d{11}$" data-bf-valid-error-msg="Пожалуйста, введите 11 цифр!" class="bf-form-control"  name="phone" placeholder="Обязательное поле" type="text" value="" />
                </div>
                <div class="bf-row">
                    <label>Email:</label>
                    <input class="bf-form-control" data-bf-valid-pattern="\S+@\S+\.\S+" data-bf-valid-error-msg="Пожалуйста, введите  адрес ел. почты!"   name="email" type="email" value="" />
                </div>
                <div class="bf-row">
                    <label>Комментарий:</label>
                    <textarea   data-bf-valid-required="1" class="bf-form-control" cols="40" rows="5" name="comment"></textarea>
                </div>
                <div class="bf-row">
                    <label>Прикрепить файлы:</label>
                    <input class="bf-form-control" multiple="multiple" name="upload_file[]" type="file" />
                </div>
                <div class="bf-row">
                    <div class="bf-info-img">
                        <img width="110" height="60" title="Обновить картинку" class="bf-img-capcha" src="/rockform/init.php?type=capcha" alt="" />
                    </div>
                    <input class="capcha bf-form-control" name="capcha" placeholder="Код с картинки" type="text" value="" />
                </div>
                <div class="bf-row">
                    <input class="btn btn-default bf-right"   type="submit" value="Отправить" />
                </div>
            </form>
        </div>
        <hr style="clear:both;">
        <h2>Документация</h2>
        <ul class="list-unstyled">
            <li><a href="#d1"> Описание</a></li>
            <li><a href="#d2"> Как подключить скрипт</a></li>
            <li><a href="#d3"> Где хранятся настройки</a></li>
            <li><a href="#d4"> Вызов для встроенной формы на странице</a></li>
            <li><a href="#d5"> Вызов для всплывающего окна</a></li>
            <li><a href="#d6"> Шаблон отправки на почту</a></li>
            <li><a href="#d6"> Валидация</a></li>
            <li><a href="#d7"> Пользовательский класс расширения функциональности</a></li>
            <li><a href="#d8"> Системные требования</a></li>
            <li><a href="#d9"> Отправка через SMTP</a></li>

        </ul>

 <h3 id="d1">Описание</h3>
        
        <p>Основные характеристики формы:</p>
        <ul>
            <li>Поддержка неорганиченного числа форм на одной странице.</li>
            <li>Подключение любой формы</li>
            <li>Поддержка модального окна.</li>
            <li>Поддержка шаблонизатора</li>
            <li>Поддержка капчи и защита от CSRF.</li>
            <li>Работа через SMTP.</li>
        </ul>

  <p>  Системные требования:</p>
        <ul>
            <li>PHP5 &gt;= 5.3.0</li>
        </ul>



        <h3 id="d2">Как подключить скрипт</h3>
        <p>Подключить скрипты в указанной последовательности</p>
        <pre><code>&lt;!-- Rockform --&gt;
    &lt;link href="/rockform/frontend/themes/default/main.css" type="text/css" rel="stylesheet" /&gt;
    &lt;script data-main="/rockform/frontend/lib/app" src="/rockform/frontend/lib/require.min.js"&gt;&lt;/script&gt;
&lt;!-- // Rockform --&gt;
</code></pre>



       <h3 id="d3">Настройки</h3>

            <p>Настройки хранятся в <a href="https://ru.wikipedia.org/wiki/.ini">.ini</a> формате и находятся в файле <strong>config.php</strong>.</p>
    
        <p>Для подключения формы на странице достаточно добавить атрибут: </p>

       <pre><code>data-bf-config=""</code></pre>

       <p> и передать ему название конфигурации.</p>

         <p class="text-muted">Пример</p>

         <pre><code>data-bf-config="Название_конфигурации"</code></pre>
       
        <p>Название конфигурации совпадает с именем папки в директории <strong>/configs/</strong>. По умолчанию, при пустом вызове, настройки берутся из <strong>/configs/default/</strong>. Можно создать сколько угодно конфигураций, просто копируя папку <strong>default</strong> с другим названием и меняя параметры на свои.</p>

        <p>Важной характеристикой является поддержка наследования. Например, в новой конфигурации можно не указывать почту получателя, она возьмётся из папки по умолчанию: <strong>/configs/default</strong>.</p>


<table class="table table-bordered">
 
<caption>Доступные настройки</caption>
    <tbody>
    <tr>
    <th>Параметр</th>
     <th>Значение по умолчанию</th>
     <th>Обязательное</th>
    <th>Описание</th>
  </tr>
 ; Заголовок письма.


  <tr>
    <td>to</td>
    <td></td>
     <td>Да</td>
    <td>Почта получателей. Можно несколько через запятую.</td>
    <tr>

 <tr>
    <td>subject </td>
    <td>Письмо с сайта</td>
     <td></td>
    <td>Заголовок письма.</td>
    <tr>
 
  <tr>
    <td>from_email</td>
    <td>from@{{SERVER_NAME}}</td>
     <td></td>
    <td>Почта, которая будет указана в качестве адреса отправителя.</td>
    <tr>

  <tr>
    <td>from_name</td>
    <td>Из {{SERVER_NAME}}</td>
     <td></td>
    <td>Имя или название источника отправителя.</td>
    <tr>

      <tr>
    <td>used_lexicon</td>
    <td></td>
     <td></td>
    <td>Лексикон</td>
    <tr>

      <tr>
    <td>disable_mail_send</td>
    <td></td>
     <td></td>
    <td>Не отправлять почту</td>
    <tr>

      <tr>
    <td>SMTPHost</td>
    <td></td>
     <td></td>
    <td><span style="display: none;">Specify main and backup SMTP servers</span>
Адрес SMTP сервера</td>
    <tr>
      <tr>
    <td>SMTPAuth</td>
    <td></td>
     <td></td>
    <td><span style="display: none;">Enable SMTP authentication</span>Включение SMTP авторизации </td>
    <tr>
      <tr>
    <td>SMTPUsername</td>
    <td></td>
     <td></td>
    <td><span style="display: none;">SMTP username</span> SMTP пользователь  </td>
    <tr>
      <tr>
    <td>SMTPPassword</td>
    <td></td>
     <td></td>
    <td><span style="display: none;">SMTP password </span>SMTP пароль  </td>
    <tr>
       <tr>
    <td>SMTPSecure</td>
    <td>ssl</td>
     <td></td>
    <td>
    <span style="display: none;">
        Enable TLS encryption, `ssl` also accepted
    </span> 
     Включение шифрования TLS, также доступен `ssl`  </td>
    <tr>
      <tr>
    <td>SMTPPort</td>
    <td>465</td>
     <td></td>
    <td> <span style="display: none;">TCP port to connect to</span>  TCP порт</td>
    <tr>
 
 
 </table>

 

        <h3 id="d4">  Вызов для встроенной формы на странице</h3>

        <p>Для подключения существующей формы на странице достаточно тегу <strong>form</strong> добавить атрибут с названием конфигурации: </p>

         <pre><code>data-bf-config=""</code></pre>


       <p> Можно оставить пустым, тогда конфигурация возьмётся из папки по умолчанию: <strong>/configs/default</strong>. </p>



        <h3 id="d5"> Вызов для всплывающего окна</h3>

        <p>Шаблон всплывающего окна хранится в папке <strong>/templates/form_popup.html</strong>. В него можно передать любой html-код с формой, он подхватится автоматически. Также есть поддержка шаблонизатора Twig.</p>

        <p>Для вызова всплывающего окна нужно добавить атрибут:</p>

          <pre><code>data-bf-config=""</code></pre>

         <p>на любой тег, кроме формы.</p>

        <p>В всплывающую форму можно передать параметры через data-атрибуты, например: </p>

        <pre><code>data-bf-field_title="Параметр"</code></pre>

        <p>Где <strong>title</strong> можно заменить на своё название.</p>

        <p>Стоит учесть, что здесь обязательно нужно использовать нижнее подчёркивание.</p>

        <p>Переданная переменная будет доступна как: <strong>{{field_title}}</strong> в шаблонах отправки на почту и всплывающей формы.</p>


        <h3 id="d6"> Шаблон отправки на почту</h3>
        <p>Шаблон лежит в папке <strong>/templates/report_on_mail.html</strong>.</p>
        <p>В качестве шаблона для полей используется конструкция <strong>{{название_поля}}</strong>. Поддерживает работу с шаблонизатором Twig.</p>

        <p>Также доступны две системные перенные:  </p>
        <ul>
    <li><b>{{bf_page_link}}</b> - адрес страницы оформления формы.</li>
    <li><b><strong>h1</strong></b> - тег <strong>h1</strong> страницы оформления формы.</li> 
</ul>

<h3 id="d7"> Валидация на клиенте</h3>

<p>Доступны следующие аттрибуты валидации:</p>

<ul>
    <li><b>data-bf-valid-pattern=""</b> - принимает на вход проверяемое выражение.</li>
    <li><b>data-bf-valid-error-msg=""</b> - сообщение в случае не совпадения с выражением.</li>
    <li><b>data-bf-valid-required="1"</b> - устанавливает, что поле обязательно для заполнения.</li>
</ul>
 
<table class="table table-bordered">
 
<caption>Примеры выражений</caption>
  <tbody><tr>
    <th>Выражение</th>
    <th>Описание</th>
  </tr>
  <tr>
    <td>\d или
      [0-9]</td>
    <td>Одна цифра от 0 до 9.</td>
  </tr>
  <tr>
    <td>\D или
    [^0-9]</td>
    <td>Любой символ кроме цифры.</td>
  </tr>
  <tr>
    <td>\s</td>
    <td>Пробел.</td>
  </tr>
  <tr>
    <td>[A-Z]</td>
    <td>Только заглавная латинская буква.</td>
  </tr>
  <tr>
    <td>[A-Za-z]</td>
    <td>Только латинская буква в любом регистре.</td>
  </tr>
  <tr>
    <td>[А-Яа-яЁё]</td>
    <td>Только русская буква в любом регистре.</td>
  </tr>
  <tr>
    <td>[A-Za-zА-Яа-яЁё]</td>
    <td>Любая буква русского и латинского алфавита.</td>
  </tr>
  <tr>
    <td>[0-9]{3}</td>
    <td>Три цифры.</td>
  </tr>
  <tr>
    <td>[A-Za-z]{6,}</td>
    <td>Не менее шести латинских букв.</td>
  </tr>
  <tr>
    <td>[0-9]{,3}</td>
    <td>Не более трёх цифр.</td>
  </tr>
  <tr>
    <td>[0-9]{5,10}</td>
    <td>От пяти до десяти цифр.</td>
  </tr>
  <tr>
    <td>^[a-zA-Z]+$</td>
    <td>Любое слово на латинице.</td>
  </tr>
  <tr>
    <td>^[А-Яа-яЁё\s]+$</td>
    <td>Любое слово на русском включая пробелы.</td>
  </tr>
  <tr>
    <td>^[ 0-9]+$</td>
    <td>Любое число.</td>
  </tr>
  <tr>
    <td>[0-9]{6}</td>
    <td>Почтовый индекс.</td>
  </tr>
  <tr>
    <td>\d+(,\d{2})?</td>
    <td>Число в формате 1,34 (разделитель запятая).</td>
  </tr>
  <tr>
    <td>\d+(\.\d{2})?</td>
    <td>Число в формате 2.10 (разделитель точка).</td>
  </tr>
  <tr>
    <td>\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}</td>
    <td>IP-адрес</td>
  </tr>

    <tr>
        <td>\S+@\S+\.\S+</td>
        <td>Электронная почта.</td>
    </tr>
 
</table>

  
        <h3 id="d10"> Отправка через SMTP</h3>
 
       <p>Рассмотрим передачу параметров для Yandex. Остальные можно настроить по аналогии.</p>
        

        <pre><code>; Почта, которая будет указана в качестве адреса отправителя. Совпадает с пользователем SMTP.
from_email = your_mail@yandex.ru

;Адрес SMTP сервера
Host = smtp.yandex.ru  

;Включение SMTP авторизации
SMTPAuth = true 

;SMTP пользователь  
Username = your_mail@yandex.ru

; SMTP пароль 
Password =  

; Включение шифрования TLS, также доступен `ssl`
SMTPSecure = ssl

; TCP порт
Port = 465;</code></pre>

     


      <h3 id="d8">  Пользовательский класс расширения функциональности</h3>
            <p>Для расширения фунциональности, например, для записи данных из формы в базу данных существует класс расширения.</p>
            <p>Класс находится по пути <strong>/model/events.class.php</strong></p> 
        </ul>

   





   <br />
        <br />
    </div>
    <!-- /container -->
</body>

</html>
