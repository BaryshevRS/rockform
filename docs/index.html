<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="robots" content="noindex, nofollow" />
    <title>Демонстрация работы</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" type="text/css" rel="stylesheet" />
    <!-- Rockform -->
    <link href="/rockform/frontend/themes/default/main.css" type="text/css" rel="stylesheet" />
    <script data-main="/rockform/frontend/lib/app" src="/rockform/frontend/lib/require.min.js"></script>
    <!-- // Rockform -->
     
</head>

<body>
    <div class="container">
        <div class="page-header">
            <h1>Rockform</h1>
            <p class="lead">Документация и демонстрация работы.</p>
        </div>
        <div style="display: block;">
            <h3>test</h3>
            <p>
                <a class="btn btn-lg btn-default" data-bf-field_title="test" data-bf-config="test" href="#">Запустить пример</a>
            </p>
        </div>
        <h3>Простое модальное окно</h3>
        <p>
            <a class="btn btn-lg btn-default" data-bf-config="" href="#">Запустить пример</a>
        </p>
        <hr>
        <h3>Модальное окно с параметром</h3>
        <p>
            <a class="btn btn-lg btn-default" data-bf-field_title="Переданный параметр" data-bf-config="" href="#">Запустить пример</a>
        </p>
        <hr>
        <h3>Встроенная форма</h3>
        <br />
        <div class="bf-content">
            <div class="bf-header">
                Форма отправки сообщения!
            </div>
            <form data-bf-config="" action="" method="post">
                <div class="bf-row">
                    <label>Имя:</label>
                    <input class="bf-form-control" required="required" name="name" placeholder="Обязательное поле" type="text" value="" />
                </div>
                <div class="bf-row">
                    <label>Телефон:</label>
                    <input class="bf-form-control" required="required" name="phone" placeholder="Обязательное поле" type="text" value="" />
                </div>
                <div class="bf-row">
                    <label>Email:</label>
                    <input class="bf-form-control" name="email" type="email" value="" />
                </div>
                <div class="bf-row">
                    <label>Комментарий:</label>
                    <textarea class="bf-form-control" cols="40" rows="5" name="comment"></textarea>
                </div>
                <div class="bf-row">
                    <label>Прикрепить файлы:</label>
                    <input class="bf-form-control" multiple="multiple" name="upload_file[]" type="file" />
                </div>
                <div class="bf-row">
                    <div class="bf-info-img">
                        <img width="110" height="60" title="Обновить картинку" class="bf-img-capcha" src="/rockform/init.php?type=capcha" alt="" />
                    </div>
                    <input class="capcha bf-form-control" name="capcha" placeholder="Код с картинки" type="text" value="" />
                </div>
                <div class="bf-row">
                    <input class="btn btn-default bf-right" name="submit" type="submit" value="Отправить" />
                </div>
            </form>
        </div>
        <hr style="clear:both;">
        <h2>Документация</h2>
        <ul class="list-unstyled">
            <li><a href="#d1">1. Описание</a></li>
            <li><a href="#d2">2. Как подключить скрипт</a></li>
            <li><a href="#d3">3. Где хранятся настройки</a></li>
            <li><a href="#d4">4. Вызов для встроенной формы на странице</a></li>
            <li><a href="#d5">5. Вызов для всплывающего окна</a></li>
            <li><a href="#d6">6. Шаблон отправки на почту</a></li>
            <li><a href="#d7">7. Пользовательский класс расширения функциональности</a></li>
            <li><a href="#d8">8. Системные требования</a></li>
            <li><a href="#d9">9. Отправка через SMTP</a></li>

        </ul>

 <h3 id="d1">1. Описание</h3>
        
        <p>Основные характеристики формы:</p>
        <ul>
            <li>Поддержка неорганиченного числа форм на одной странице.</li>
            <li>Подключение практически любой формы на сайте.</li>
            <li>Поддержка модального окна.</li>
            <li>Поддержка капчи и защита от CSRF.</li>
            <li>Работа через SMTP.</li>
        </ul>

        <h3 id="d2">2. Как подключить скрипт</h3>
        <p>Подключить скрипты в указанной последовательности</p>
        <pre><code>&lt;!-- Rockform --&gt;
    &lt;link href="/rockform/frontend/themes/default/main.css" type="text/css" rel="stylesheet" /&gt;
    &lt;script data-main="/rockform/frontend/lib/app" src="/rockform/frontend/lib/require.min.js"&gt;&lt;/script&gt;
&lt;!-- // Rockform --&gt;
</code></pre>



       <h3 id="d3">3. Где хранятся настройки</h3>
            <p>Настройки хранятся в <a href="https://ru.wikipedia.org/wiki/.ini">.ini</a> формате и находятся в файле <strong>config.php</strong>.</p>
    
        <p>Для подключения формы на странице достаточно навесить на неё атрибут: <strong>data-bf-config=""</strong> и передать ему название конфигурации.</p>

         <p class="text-muted">Пример</p>

         <pre><code>data-bf-config="Название_конфигурации"</code></pre>
       
        <p>Название конфигурации совпадает с именем папки в директории <strong>/configs</strong>. По умолчанию, при пустом вызове, настройки берутся из <strong>/configs/default/</strong>. Можно создать сколько угодно конфигураций, просто копируя папку <strong>default</strong> с другим названием и меняя параметры на свои. </p>

        <p>Важной характеристикой является поддержка наследования. Например, в новой конфигурации можно не указывать почту получателя, она возьмётся из папки по умолчанию: <strong>/configs/default</strong>.</p>
 

        <h3 id="d4"> 4. Вызов для встроенной формы на странице</h3>

        <p>Для подключения существующей формы на странице достаточно тегу <strong>form</strong> добавить атрибут с названием конфигурации: <strong>data-bf-config=""</strong>. Можно оставить пустым, тогда конфиграции возьмётся из папки по умолчанию: <strong>/configs/default</strong>. </p>



        <h3 id="d5">5. Вызов для всплывающего окна</h3>

        <p>Шаблон всплывающего окна хранится в папке <strong>/templates/form_popup.html</strong>. В нём можно передать любой html код с формой, он подхватится автоматически. Также есть поддержка шаблонизатора Twig.</p>

        <p>Для вызова всплывающего окна нужно добавить атрибут <strong>data-bf-config=""</strong> на любой тег, кроме формы.</p>

        <p>В всплывающую форму можно передать параметры через data-атрибуты, например: </p>

        <pre><code>data-bf-field_title="Переданный параметр"</code></pre>

        <p>Где <strong>title</strong> можно заменить на своё название.</p>

        <p>Стоит учесть, что здесь обязательно нужно использовать нижнее подчёркивание.</p>

        <p>Переданная переменная будет доступна как: <strong>{{field_title}}</strong> во всех шаблонах, таких как отправка на почту и всплывающей формы.</p>


        <h3 id="d6">6. Шаблон отправки на почту</h3>
        <p>Шаблон лежит в папке <strong>/templates/report_on_mail.html</strong> выбранной конфигурации.</p>
        <p>В качестве шаблона для полей используется конструкция <strong>{{название_поля}}</strong>. Поддерживает работу с шаблонизатором Twig.</p>

        <p>Также доступны две системные перенные: адрес страницы оформления формы - <strong>{{bf_page_link}}</strong> и тег <strong>h1</strong> страницы оформления формы - <strong>{{bf_page_h1}}</strong> .</p>

        <h3 id="d7">7. Пользовательский класс расширения функциональности</h3>
            <p>Для расширения фунциональности, например, для записи данных из формы в базу данных существует класс расширения.</p>
            <p>Класс находится по пути <strong>/model/events.class.php</strong></p> 
        </ul>

        <h3 id="d8">8. Системные требования</h3>
        <ul>
            <li>PHP5 &gt;= 5.2.0</li>
        </ul>

        <h3 id="d9">9. Отправка через SMTP</h3>
 
       <p>Рассмотрим передачу параметров для Yandex. Остальные можно настроить по аналогии.</p>
        

        <pre><code>; Почта, которая будет указана в качестве адреса отправителя. Совпадает с пользователем SMTP.
from_email = your_mail@yandex.ru

;Адрес SMTP сервера
Host = smtp.yandex.ru  

;Включение SMTP авторизации
SMTPAuth = true 

;SMTP пользователь  
Username = your_mail@yandex.ru

; SMTP пароль 
Password =  

; Включение шифрования TLS, также доступен `ssl`
SMTPSecure = ssl

; TCP порт
Port = 465;</code></pre>

        <br />
        <br />
    </div>
    <!-- /container -->
</body>

</html>
