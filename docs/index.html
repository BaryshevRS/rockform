<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="robots" content="noindex, nofollow" />
    <title>Демонстрация работы</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" type="text/css" rel="stylesheet" />


    <!-- Rockform -->
    <!--[if lt IE 8]> 
      <link href="/rockform/frontend/themes/default/ie.css" type="text/css" rel="stylesheet" />
    <![endif]--> 

    <link href="/rockform/frontend/themes/default/main.css" type="text/css" rel="stylesheet" />
    <script data-main="/rockform/frontend/lib/app" src="/rockform/frontend/lib/require.min.js"></script>
    <!-- // Rockform -->

</head>

<body>
    <div class="container">
        <div class="page-header">
            <h1>Rockform</h1>
            <p class="lead">Документация и демонстрация работы.</p>
        </div>

        <h3>Простое модальное окно</h3>
        <p>
            <a class="btn btn-lg btn-default" data-bf-config="" href="#">Запустить пример</a>
        </p>
        <hr>
        <h3>Модальное окно с параметром</h3>
        <p>
            <a class="btn btn-lg btn-default" data-bf-field_title="Переданный параметр" data-bf-config="test" href="#">Запустить пример</a>
        </p>    <hr>
        <h3>Модальное окно заказа обратного звонка</h3>
        <p>
            <a class="btn btn-lg btn-default"  data-bf-config="order_phone" href="#">Заказать звонок</a>
        </p>
        <hr>


        <h3>Встроенная форма с клиентской валидацией</h3>

 

        <hr style="clear:both;">
        <h2>Документация</h2>
        <ul class="list-unstyled">
            <li><a href="#d1"> Описание</a></li>
            <li><a href="#d2"> Как подключить скрипт</a></li>
            <li><a href="#d3"> Где хранятся настройки</a></li>
            <li><a href="#d6"> Шаблон отправки на почту</a></li>
            <li><a href="#d71"> Валидация </a></li>

             <li><a href="#d75"> Подключение капчи</a></li>

            
            <li><a href="#d10"> Отправка через SMTP</a></li>
           <li><a href="#d8">Расширение функциональности</a></li>
        </ul>

 <h3 id="d1">Описание</h3>

        <p>Основные характеристики формы:</p>
        <ul>
            <li>Поддержка неорганиченного числа форм на одной странице.</li>
            <li>Подключение любой формы</li>
            <li>Поддержка модального окна.</li>
            <li>Поддержка шаблонизатора</li>
            <li>Поддержка капчи и защита от CSRF.</li>
            <li>Работа через SMTP.</li>
        </ul>

  <p>  Системные требования:</p>
        <ul>
            <li>Работает с PHP 5.2 и выше</li>
            <li>Работает в IE8 и выше.</li>
        </ul>



<h3 id="d2">Как подключить скрипт</h3>


        <p>Подключить скрипты в указанной последовательности</p>
        <pre><code>&lt;!-- Rockform --&gt;
    &lt;link href="/rockform/frontend/themes/default/main.css" type="text/css" rel="stylesheet" /&gt;
    &lt;script data-main="/rockform/frontend/lib/app" src="/rockform/frontend/lib/require.min.js"&gt;&lt;/script&gt;
&lt;!-- // Rockform --&gt;
</code></pre>

<p> Для поддержки всплывающего окна в IE7 надо добавить следующий код:


</p>


<pre><code>&lt;!--[if lt IE 8]&gt;
      &lt;link href="/rockform/frontend/themes/default/ie.css" type="text/css" rel="stylesheet" /&gt;
    &lt;![endif]--&gt;</code></pre>
        <p>Для подключения существующей формы на странице достаточно тегу <strong>form</strong> добавить атрибут с названием конфигурации: </p>

         <pre><code>data-bf-config=""</code></pre>


       <p> Можно оставить пустым, тогда конфигурация возьмётся из папки по умолчанию: <strong>/configs/default</strong>. </p>
 
        <p>Для вызова всплывающего окна надо настроить шаблон, который можно найти в папке <strong>/configs/default/templates/form_popup.html</strong>. В него можно передать любой html-код с формой, он подхватится автоматически. Работает с поддержкой шаблонизатора Twig.</p>

        <p>Для вызова всплывающего окна нужно добавить атрибут:</p>

          <pre><code>data-bf-config=""</code></pre>

         <p>на любой тег, кроме формы.</p>

        <p>В всплывающую форму можно передать параметры через data-атрибуты, например: </p>

        <pre><code>data-bf-field_title="Параметр"</code></pre>

        <p>Где <strong>title</strong> можно заменить на своё название.</p>

        <p>Стоит учесть, что здесь обязательно нужно использовать нижнее подчёркивание.</p>

        <p>Переданная переменная будет доступна как: <strong>{{field_title}}</strong> в шаблонах отправки на почту и в всплывающей форме.</p>


        <h3 id="d6"> Шаблон отправки на почту</h3>
        <p>Шаблон лежит в папке <strong>/templates/report_on_mail.html</strong>.</p>
        <p>В качестве шаблона для полей используется конструкция <strong>{{название_поля}}</strong>. Поддерживает работу с шаблонизатором Twig.</p>

        <p>Также доступны две системные перенные:  </p>
        <ul>
    <li><b>{{field_page_link}}</b> - адрес страницы оформления формы.</li>
    <li><b>{{field_page_h1}}</b> - тег <strong>h1</strong> страницы оформления формы.</li>
</ul>

 
       <h3 id="d3">Настройки</h3>

      <p>Настройки хранятся в .ini формате и находятся в файле <strong>config.php</strong>.</p>

        <p>Для подключения формы на странице достаточно добавить атрибут: </p>

       <pre><code>data-bf-config=""</code></pre>

       <p> и передать ему название конфигурации.</p>

         <p class="text-muted">Пример</p>

         <pre><code>data-bf-config="Название_конфигурации"</code></pre>

        <p>Название конфигурации совпадает с именем папки в директории <strong>/configs/</strong>. По умолчанию, при пустом вызове, настройки берутся из <strong>/configs/default/</strong>. Можно создать сколько угодно конфигураций, просто копируя папку <strong>default</strong> с другим названием и меняя параметры на свои.</p>

        <p>Важной характеристикой является поддержка наследования. Например, в новой конфигурации можно не указывать почту получателя, она возьмётся из папки по умолчанию: <strong>/configs/default</strong>.
        Не наследуются только секция валидации.
        </p>


<table class="table table-bordered">

<caption>Доступные настройки</caption>
    <tbody>
    <tr>
    <th>Параметр</th>
     <th>Значение по умолчанию</th>
     <th>Обязательное</th>

    <th>Описание</th>
  </tr>

  <tr>
    <td>mail_to</td>
    <td></td>
     <td>Да</td>
    <td>Почта получателей. Можно несколько через запятую.</td>
    <tr>

 <tr>
    <td>subject </td>
    <td>Письмо с сайта</td>
     <td></td>
    <td>Заголовок письма.</td>
    <tr>

  <tr>
    <td>from_email</td>
    <td>from@{{SERVER_NAME}}</td>
     <td></td>
    <td>Почта, которая будет указана в качестве адреса отправителя.</td>
    <tr>

  <tr>
    <td>from_name</td>
    <td>Из {{SERVER_NAME}}</td>
     <td></td>
    <td>Имя или название источника отправителя.</td>
    <tr>

      <tr>
    <td>used_lexicon</td>
    <td>default</td>
     <td></td>
    <td>Лексикон</td>
    <tr>

      <tr>
    <td>disable_mail_send</td>
    <td>0</td>
     <td></td>
    <td>Не отправлять почту</td>
    <tr>

      <tr>
    <td>SMTPHost</td>
    <td></td>
     <td></td>
    <td><span style="display: none;">Specify main and backup SMTP servers</span>
Адрес SMTP сервера</td>
    <tr>
      <tr>
    <td>SMTPAuth</td>
    <td></td>
     <td></td>
    <td><span style="display: none;">Enable SMTP authentication</span>Включение SMTP авторизации </td>
    <tr>
      <tr>
    <td>SMTPUsername</td>
    <td></td>
     <td></td>
    <td><span style="display: none;">SMTP username</span> SMTP пользователь  </td>
    <tr>
      <tr>
    <td>SMTPPassword</td>
    <td></td>
     <td></td>
    <td><span style="display: none;">SMTP password </span>SMTP пароль  </td>
    <tr>
       <tr>
    <td>SMTPSecure</td>
    <td>ssl</td>
     <td></td>
    <td>
    <span style="display: none;">
        Enable TLS encryption, `ssl` also accepted
    </span>
     Включение шифрования TLS, также доступен `ssl`  </td>
    <tr>
      <tr>
    <td>SMTPPort</td>
    <td>465</td>
     <td></td>
    <td> <span style="display: none;">TCP port to connect to</span>  TCP порт</td>
    <tr>


 </table>
 
<h3 id="d71"> Валидация </h3>

<p>Для включения валидации полей, надо в конфигурационом файле добавить секцию [validation].</p>
<p>Затем перечислить названия полей и атрибуты валидации к ним.</p>

<p>Пример: <b>name = 'required,minlength[3],words'</b>. Это будет означать, что атрибут поля <i>name</i> со значением - "name"
  будет обязательно для заполнения, минимальное допустимое число символов 3 и на вход должны быть переданы только слова.</p>

<table class="table table-bordered">

<caption>Доступны следующие аттрибуты валидации</caption>
  <tbody><tr>
    <th>Выражение</th>
    <th>Описание</th>
  </tr>
  <tr>
    <td>required</td>
    <td>Поле становится обязательным для заполнения</td>
  </tr>
  <tr>
    <td>minlength[1]</td>
    <td>Минимальное число символов, в скобочках указывается значение</td>
  </tr>
  <tr>
    <td>maxlength[10]</td>
    <td>Максимально число символов, в скобочках указывается значение</td>
  </tr>
  <tr>
    <td>rangelength[1,10]</td>
    <td>Диапозон числа символов, в скобочках указывается значение</td>
  </tr>
  <tr>
    <td>email</td>
    <td>Электронная почта</td>
  </tr>
  <tr>
    <td>url</td>
    <td>Ссылка</td>
  </tr>
  <tr>
    <td>ip</td>
    <td>ip-адрес</td>
  </tr>
  <tr>
    <td>number</td>
    <td>Дробные числа</td>
  </tr>
  <tr>
    <td>digits</td>
    <td>Только цифры</td>
  </tr>
  <tr>
    <td>letter</td>
    <td>Только буквы</td>
  </tr>
  <tr>
    <td>words</td>
    <td>Ввод слов</td>
  </tr>
  <tr>
    <td>file[.jpg,.png]</td>
    <td>Допустимые расширения файлов, в скобочках расширения через запятую</td>
  </tr>

</table>

<h3 id="d75">Добавление капчи</h3>

<p>1. Для добавления капчи нужно картинке присвоить аттрибут - <b>data-bf-capcha=""</b>.</p> 
<p>2. В конфигурационном файле указать в секции <b>[validation]</b> параметр  

<b>bf_capcha = capcha</b>. Где <b>bf_capcha</b> - значение атрибута <i>name</i> для поля, в который будет вводиться информация с картинки.</p>

 <h3 id="d10"> Отправка через SMTP</h3>

       <p>Рассмотрим передачу параметров для Yandex. Остальные можно настроить по аналогии.</p>


        <pre><code>
         from_email = your_mail@yandex.ru>; Почта, которая будет указана в качестве адреса отправителя. Совпадает с пользователем SMTP.
         SMTPHost =  smtp.yandex.ru ;Адрес SMTP сервера
         SMTPAuth  = true ;Включение SMTP авторизации
         SMTPUsername = your_mail@yandex.ru ;SMTP пользователь
         SMTPPassword =  ; SMTP пароль
         SMTPSecure = ssl ;Включение шифрования TLS, также доступен `ssl`
         SMTPPort = 465; TCP порт
</code></pre>

      <h3 id="d8">  Расширение функциональности</h3>
            <p>Для расширения фунциональности, например, для записи данных из формы
               в базу данных существует класс расширения.</p>
            <p>Класс находится по пути <strong>/configs/default/events.php</strong></p>
            <p>Для создания специфичной функциональности в своём конфиге нужно скопировать этот файл
              со своими изменениями.</p>
        </ul>

   <br />
        <br />
    </div>
    <!-- /container -->
</body>

</html>
