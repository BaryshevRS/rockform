!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.form.min","jquery.mask.min","jquery.rtooltip","jquery.rmodal"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=window.baseform||{};e=function(){function e(e,i){var n,o=this;o.defaults={accessibility:!0},o.initials={animating:!1,dragging:!1},t.extend(o,o.initials),o.activeBreakpoint=null,n=t(e).data("slick")||{},o.options=t.extend({},o.defaults,i,n)}return e}(),e.prototype.init=function(t){};var i="rockform";e.prototype.fileupload=function(e){t(document).on("change",".bf-input-file",function(e){var i=t(this),n=i.next("label"),o=n.html(),a="";this.files&&this.files.length>1?a=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value&&(a=e.target.value.split("\\").pop()),a?n.find("span").html(a):n.html(o)})},e.prototype.capcha=function(e){var i=window.MutationObserver||window.WebKitMutationObserver||"";if(i.length>0){var i=window.MutationObserver||window.WebKitMutationObserver,n=function(e){e.map(function(e){var i=t(e.addedNodes);i.find("img[data-bf-capcha]").click()})},a=new i(n),r={childList:!0,subtree:!0};a.observe(document,r)}var f={init:function(){f.update(),t(document).off("click","img[data-bf-capcha]").on("click","img[data-bf-capcha]",function(){f.update()})},update:function(){t("img[data-bf-capcha]").attr("src",o.path+"?type=capcha&u="+Math.random())}};f.init()},e.prototype.mask_fields=function(t){mask.init()};var n={server:function(e,i,a){var r,f,u=0;return t(".bf-tooltip").rtooltip("reset"),i.mail_to?(t('[type="submit"], [type="image"], [type="button"]',e).rtooltip({msg:i.mail_to}),!1):i.filesize?(t('[type="submit"], [type="image"], [type="button"]',e).rtooltip({msg:i.filesize}),!1):(t.each(i,function(a,s){r="","token"==a?o.set_attr_form(e,i.token,"bf-token"):"filesize"==a||(r=n.set_err_msg(s),f=t('[name="'+a+'"]',e),f.rtooltip({msg:r}),r.length>0&&(u=1))}),!(parseInt(u)>0))},set_err_msg:function(e){var i="";return e.required?i=e.required:e.rangelength?i=e.rangelength:e.minlength?i=e.minlength:e.maxlength?i=e.maxlength:t.each(e,function(t,e){if("required"!=t&&"rangelength"!=t&&"minlength"!=t&&"maxlength"!=t)return i=e,!1}),i}},o={config:"",path:"/"+i+"/init.php",timer:function(t){var e=2e3,i=t.data("bf-timer");return"undefined"!=typeof i&&parseInt(i)>0&&(e=i),e},init:function(){capcha.init(),bf_mask.init(),t(document).off("submit","form[data-bf-config], .bf-modal form").on("submit","form[data-bf-config], .bf-modal form",function(e){e.preventDefault(),t(".bf-tooltip").rtooltip("reset");var i=t(this);"undefined"==typeof param&&(param={},param.config_popup=""),o.config=o.get_config(param.config_popup,i.data("bf-config"));var a=i.formToArray(),r=[];t.each(a,function(t,e){"file"==e.type&&(a[t].size=e.value.size||"",a[t].value=e.value.name||"",r.push(a[t].size))}),t.post(o.path,{fields:a,type:"validation","bf-config":o.config,filesize:r},function(a){o.set_attr_form(i,o.config,"bf-config"),n.server(i,a,e)&&("undefined"!=typeof param.attributes&&t.each(param.attributes,function(t,e){o.set_attr_form(i,e,t)}),i.ajaxSubmit({beforeSubmit:function(e,i,n){t(":focus",i).prop("disabled",!0)},success:o.show_response,url:o.path,type:"post",dataType:"json",error:function(t,e,i){alert("Server: "+e)}})),t(".bf-attr").remove()})}),t.rmodal("[data-bf-config]:not(form)",{path:o.path,before:function(e,i){t(".bf-tooltip").rtooltip("reset");var n=t(e).data("bf-config")||"",a={attributes:o.get_attributes(e),"bf-config":n,type:"form"};return i.attributes=a,i}})},get_attributes:function(e){var i={},n="";return e.length&&t.each(e[0].attributes,function(t,e){n=e.name,/data\-bf\-field/.test(n)&&(n=n.replace("data-bf-",""),i[n]=e.value)}),i.field_page_h1=t("h1:first").text()||"",i.field_page_link=document.location.href,i},set_attr_form:function(t,e,i){t.prepend('<input name="'+i+'" class="bf-attr" type="hidden" value="'+e+'" />')},get_config:function(t,e){return"undefined"==typeof t||t.length<1?("undefined"==typeof e||e.length<1)&&(e=""):e=t,e},show_response:function(e,i,n,a){var r=t('[type="submit"], [type="image"], [type="button"]',a);r.prop("disabled",!1).removeAttr("disabled"),parseInt(e.status)>0?t.post(o.path,{type:"form_success","bf-config":e["bf-config"]},function(e){a.hide(),a.after(e),setTimeout(function(){t.rmodal("reset")},o.timer(a)),setTimeout(function(){a.show(),a.clearForm(),t("[data-bf-success]").remove()},o.timer(a)+1e3)},"html"):r.rtooltip({msg:e.value})}};o.init();var a={init:function(t,arguments){}};t.fn.rockform=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):e.length>0?a.init.apply(this,arguments):(t.error('Method "'+e+'" not find'),e)}});