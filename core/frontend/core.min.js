"use strict";!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery||Zepto)}(function(t){var e=function(e,a,n){var r={invalid:[],getCaret:function(){try{var t,a=0,n=e.get(0),o=document.selection,i=n.selectionStart;return o&&-1===navigator.appVersion.indexOf("MSIE 10")?(t=o.createRange(),t.moveStart("character",-r.val().length),a=t.text.length):(i||"0"===i)&&(a=i),a}catch(s){}},setCaret:function(t){try{if(e.is(":focus")){var a,n=e.get(0);n.setSelectionRange?(n.focus(),n.setSelectionRange(t,t)):(a=n.createTextRange(),a.collapse(!0),a.moveEnd("character",t),a.moveStart("character",t),a.select())}}catch(r){}},events:function(){e.on("keydown.mask",function(t){e.data("mask-keycode",t.keyCode||t.which)}).on(t.jMaskGlobals.useInput?"input.mask":"keyup.mask",r.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}).on("change.mask",function(){e.data("changed",!0)}).on("blur.mask",function(){s===r.val()||e.data("changed")||e.trigger("change"),e.data("changed",!1)}).on("blur.mask",function(){s=r.val()}).on("focus.mask",function(e){n.selectOnFocus===!0&&t(e.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!o.test(r.val())&&r.val("")})},getRegexMask:function(){for(var t,e,n,r,o,s,l=[],c=0;c<a.length;c++)t=i.translation[a.charAt(c)],t?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=t.optional,r=t.recursive,r?(l.push(a.charAt(c)),o={digit:a.charAt(c),pattern:e}):l.push(n||r?e+"?":e)):l.push(a.charAt(c).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return s=l.join(""),o&&(s=s.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(s)},destroyEvents:function(){e.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(t){var a,n=e.is("input"),r=n?"val":"text";return arguments.length>0?(e[r]()!==t&&e[r](t),a=e):a=e[r](),a},getMCharsBeforeCount:function(t,e){for(var n=0,r=0,o=a.length;o>r&&t>r;r++)i.translation[a.charAt(r)]||(t=e?t+1:t,n++);return n},caretPos:function(t,e,n,o){var s=i.translation[a.charAt(Math.min(t-1,a.length-1))];return s?Math.min(t+n-e-o,n):r.caretPos(t+1,e,n,o)},behaviour:function(a){a=a||window.event,r.invalid=[];var n=e.data("mask-keycode");if(-1===t.inArray(n,i.byPassKeys)){var o=r.getCaret(),s=r.val(),l=s.length,c=r.getMasked(),f=c.length,u=r.getMCharsBeforeCount(f-1)-r.getMCharsBeforeCount(l-1),d=l>o;return r.val(c),d&&(8!==n&&46!==n&&(o=r.caretPos(o,l,f,u)),r.setCaret(o)),r.callbacks(a)}},getMasked:function(t,e){var o,s,l=[],c=void 0===e?r.val():e+"",f=0,u=a.length,d=0,p=c.length,m=1,h="push",v=-1;for(n.reverse?(h="unshift",m=-1,o=0,f=u-1,d=p-1,s=function(){return f>-1&&d>-1}):(o=u-1,s=function(){return u>f&&p>d});s();){var g=a.charAt(f),b=c.charAt(d),y=i.translation[g];y?(b.match(y.pattern)?(l[h](b),y.recursive&&(-1===v?v=f:f===o&&(f=v-m),o===v&&(f-=m)),f+=m):y.optional?(f+=m,d-=m):y.fallback?(l[h](y.fallback),f+=m,d-=m):r.invalid.push({p:d,v:b,e:y.pattern}),d+=m):(t||l[h](g),b===g&&(d+=m),f+=m)}var x=a.charAt(o);return u!==p+1||i.translation[x]||l.push(x),l.join("")},callbacks:function(t){var o=r.val(),i=o!==s,l=[o,t,e,n],c=function(t,e,a){"function"==typeof n[t]&&e&&n[t].apply(this,a)};c("onChange",i===!0,l),c("onKeyPress",i===!0,l),c("onComplete",o.length===a.length,l),c("onInvalid",r.invalid.length>0,[o,t,e,r.invalid,n])}};e=t(e);var o,i=this,s=r.val();a="function"==typeof a?a(r.val(),void 0,e,n):a,i.mask=a,i.options=n,i.remove=function(){var t=r.getCaret();return r.destroyEvents(),r.val(i.getCleanVal()),r.setCaret(t-r.getMCharsBeforeCount(t)),e},i.getCleanVal=function(){return r.getMasked(!0)},i.getMaskedVal=function(t){return r.getMasked(!1,t)},i.init=function(a){if(a=a||!1,n=n||{},i.clearIfNotMatch=t.jMaskGlobals.clearIfNotMatch,i.byPassKeys=t.jMaskGlobals.byPassKeys,i.translation=t.extend({},t.jMaskGlobals.translation,n.translation),i=t.extend(!0,{},i,n),o=r.getRegexMask(),a===!1){n.placeholder&&e.attr("placeholder",n.placeholder),e.data("mask")&&e.attr("autocomplete","off"),r.destroyEvents(),r.events();var s=r.getCaret();r.val(r.getMasked()),r.setCaret(s+r.getMCharsBeforeCount(s,!0))}else r.events(),r.val(r.getMasked())},i.init(!e.is("input"))};t.maskWatchers={};var a=function(){var a=t(this),r={},o="data-mask-",i=a.attr("data-mask");return a.attr(o+"reverse")&&(r.reverse=!0),a.attr(o+"clearifnotmatch")&&(r.clearIfNotMatch=!0),"true"===a.attr(o+"selectonfocus")&&(r.selectOnFocus=!0),n(a,i,r)?a.data("mask",new e(this,i,r)):void 0},n=function(e,a,n){n=n||{};var r=t(e).data("mask"),o=JSON.stringify,i=t(e).val()||t(e).text();try{return"function"==typeof a&&(a=a(i)),"object"!=typeof r||o(r.options)!==o(n)||r.mask!==a}catch(s){}},r=function(t){var e,a=document.createElement("div");return t="on"+t,e=t in a,e||(a.setAttribute(t,"return;"),e="function"==typeof a[t]),a=null,e};t.fn.mask=function(a,r){r=r||{};var o=this.selector,i=t.jMaskGlobals,s=i.watchInterval,l=r.watchInputs||i.watchInputs,c=function(){return n(this,a,r)?t(this).data("mask",new e(this,a,r)):void 0};return t(this).each(c),o&&""!==o&&l&&(clearInterval(t.maskWatchers[o]),t.maskWatchers[o]=setInterval(function(){t(document).find(o).each(c)},s)),this},t.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each(function(){var e=t(this).data("mask");e&&e.remove().removeData("mask")})},t.fn.cleanVal=function(){return this.data("mask").getCleanVal()},t.applyDataMask=function(e){e=e||t.jMaskGlobals.maskElements;var n=e instanceof t?e:t(e);n.filter(t.jMaskGlobals.dataMaskAttr).each(a)};var o={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:r("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};t.jMaskGlobals=t.jMaskGlobals||{},o=t.jMaskGlobals=t.extend(!0,{},o,t.jMaskGlobals),o.dataMask&&t.applyDataMask(),setInterval(function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()},o.watchInterval)}),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(t){function e(e){var a=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(a))}function a(e){var a=e.target,n=t(a);if(!n.is("[type=submit],[type=image]")){var r=n.closest("[type=submit]");if(0===r.length)return;a=r[0]}var o=this;if(o.clk=a,"image"==a.type)if(void 0!==e.offsetX)o.clk_x=e.offsetX,o.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var i=n.offset();o.clk_x=e.pageX-i.left,o.clk_y=e.pageY-i.top}else o.clk_x=e.pageX-a.offsetLeft,o.clk_y=e.pageY-a.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function n(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var r={};r.fileapi=void 0!==t("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData;var o=!!t.fn.prop;t.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function a(a){var n,r,o=t.param(a,e.traditional).split("&"),i=o.length,s=[];for(n=0;i>n;n++)o[n]=o[n].replace(/\+/g," "),r=o[n].split("="),s.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return s}function i(n){for(var r=new FormData,o=0;o<n.length;o++)r.append(n[o].name,n[o].value);if(e.extraData){var i=a(e.extraData);for(o=0;o<i.length;o++)i[o]&&r.append(i[o][0],i[o][1])}e.data=null;var s=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(s.xhr=function(){var a=t.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(t){var a=0,n=t.loaded||t.position,r=t.total;t.lengthComputable&&(a=Math.ceil(n/r*100)),e.uploadProgress(t,n,r,a)},!1),a}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(t,a){e.formData?a.data=e.formData:a.data=r,c&&c.call(this,t,a)},t.ajax(s)}function s(a){function r(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(a){n("cannot get iframe.contentWindow document: "+a)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(a){n("cannot get iframe.contentDocument: "+a),e=t.document}return e}function i(){function e(){try{var t=r(g).readyState;n("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(a){n("Server abort: ",a," (",a.name,")"),s(T),w&&clearTimeout(w),w=void 0}}var a=u.attr2("target"),o=u.attr2("action"),i="multipart/form-data",c=u.attr("enctype")||u.attr("encoding")||i;j.setAttribute("target",m),l&&!/post/i.test(l)||j.setAttribute("method","POST"),o!=d.url&&j.setAttribute("action",d.url),d.skipEncodingOverride||l&&!/post/i.test(l)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(w=setTimeout(function(){k=!0,s(M)},d.timeout));var f=[];try{if(d.extraData)for(var p in d.extraData)d.extraData.hasOwnProperty(p)&&(t.isPlainObject(d.extraData[p])&&d.extraData[p].hasOwnProperty("name")&&d.extraData[p].hasOwnProperty("value")?f.push(t('<input type="hidden" name="'+d.extraData[p].name+'">').val(d.extraData[p].value).appendTo(j)[0]):f.push(t('<input type="hidden" name="'+p+'">').val(d.extraData[p]).appendTo(j)[0]));d.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(e,15);try{j.submit()}catch(h){var b=document.createElement("form").submit;b.apply(j)}}finally{j.setAttribute("action",o),j.setAttribute("enctype",c),a?j.setAttribute("target",a):u.removeAttr("target"),t(f).remove()}}function s(e){if(!b.aborted&&!E){if(C=r(g),C||(n("cannot access response document"),e=T),e===M&&b)return b.abort("timeout"),void _.reject(b,"timeout");if(e==T&&b)return b.abort("server abort"),void _.reject(b,"error","server abort");if(C&&C.location.href!=d.iframeSrc||k){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var a,o="success";try{if(k)throw"timeout";var i="xml"==d.dataType||C.XMLDocument||t.isXMLDoc(C);if(n("isXml="+i),!i&&window.opera&&(null===C.body||!C.body.innerHTML)&&--I)return n("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var l=C.body?C.body:C.documentElement;b.responseText=l?l.innerHTML:null,b.responseXML=C.XMLDocument?C.XMLDocument:C,i&&(d.dataType="xml"),b.getResponseHeader=function(t){var e={"content-type":d.dataType};return e[t.toLowerCase()]},l&&(b.status=Number(l.getAttribute("status"))||b.status,b.statusText=l.getAttribute("statusText")||b.statusText);var c=(d.dataType||"").toLowerCase(),f=/(json|script|text)/.test(c);if(f||d.textarea){var u=C.getElementsByTagName("textarea")[0];if(u)b.responseText=u.value,b.status=Number(u.getAttribute("status"))||b.status,b.statusText=u.getAttribute("statusText")||b.statusText;else if(f){var m=C.getElementsByTagName("pre")[0],h=C.getElementsByTagName("body")[0];m?b.responseText=m.textContent?m.textContent:m.innerText:h&&(b.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!b.responseXML&&b.responseText&&(b.responseXML=q(b.responseText));try{A=L(b,c,d)}catch(y){o="parsererror",b.error=a=y||o}}catch(y){n("error caught: ",y),o="error",b.error=a=y||o}b.aborted&&(n("upload aborted"),o=null),b.status&&(o=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===o?(d.success&&d.success.call(d.context,A,"success",b),_.resolve(b.responseText,"success",b),p&&t.event.trigger("ajaxSuccess",[b,d])):o&&(void 0===a&&(a=b.statusText),d.error&&d.error.call(d.context,b,o,a),_.reject(b,"error",a),p&&t.event.trigger("ajaxError",[b,d,a])),p&&t.event.trigger("ajaxComplete",[b,d]),p&&!--t.active&&t.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,b,o),E=!0,d.timeout&&clearTimeout(w),setTimeout(function(){d.iframeTarget?v.attr("src",d.iframeSrc):v.remove(),b.responseXML=null},100)}}}var c,f,d,p,m,v,g,b,y,x,k,w,j=u[0],_=t.Deferred();if(_.abort=function(t){b.abort(t)},a)for(f=0;f<h.length;f++)c=t(h[f]),o?c.prop("disabled",!1):c.removeAttr("disabled");if(d=t.extend(!0,{},t.ajaxSettings,e),d.context=d.context||d,m="jqFormIO"+(new Date).getTime(),d.iframeTarget?(v=t(d.iframeTarget),x=v.attr2("name"),x?m=x:v.attr2("name",m)):(v=t('<iframe name="'+m+'" src="'+d.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var a="timeout"===e?"timeout":"aborted";n("aborting upload... "+a),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(r){}v.attr("src",d.iframeSrc),b.error=a,d.error&&d.error.call(d.context,b,a,e),p&&t.event.trigger("ajaxError",[b,d,a]),d.complete&&d.complete.call(d.context,b,a)}},p=d.global,p&&0===t.active++&&t.event.trigger("ajaxStart"),p&&t.event.trigger("ajaxSend",[b,d]),d.beforeSend&&d.beforeSend.call(d.context,b,d)===!1)return d.global&&t.active--,_.reject(),_;if(b.aborted)return _.reject(),_;y=j.clk,y&&(x=y.name,x&&!y.disabled&&(d.extraData=d.extraData||{},d.extraData[x]=y.value,"image"==y.type&&(d.extraData[x+".x"]=j.clk_x,d.extraData[x+".y"]=j.clk_y)));var M=1,T=2,S=t("meta[name=csrf-token]").attr("content"),D=t("meta[name=csrf-param]").attr("content");D&&S&&(d.extraData=d.extraData||{},d.extraData[D]=S),d.forceSync?i():setTimeout(i,10);var A,C,E,I=50,q=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},O=t.parseJSON||function(t){return window.eval("("+t+")")},L=function(e,a,n){var r=e.getResponseHeader("content-type")||"",o="xml"===a||!a&&r.indexOf("xml")>=0,i=o?e.responseXML:e.responseText;return o&&"parsererror"===i.documentElement.nodeName&&t.error&&t.error("parsererror"),n&&n.dataFilter&&(i=n.dataFilter(i,a)),"string"==typeof i&&("json"===a||!a&&r.indexOf("json")>=0?i=O(i):("script"===a||!a&&r.indexOf("javascript")>=0)&&t.globalEval(i)),i};return _}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var l,c,f,u=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),l=e.type||this.attr2("method"),c=e.url||this.attr2("action"),f="string"==typeof c?t.trim(c):"",f=f||window.location.href||"",f&&(f=(f.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:f,success:t.ajaxSettings.success,type:l||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var d={};if(this.trigger("form-pre-serialize",[this,e,d]),d.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=e.traditional;void 0===p&&(p=t.ajaxSettings.traditional);var m,h=[],v=this.formToArray(e.semantic,h);if(e.data&&(e.extraData=e.data,m=t.param(e.data,p)),e.beforeSubmit&&e.beforeSubmit(v,this,e)===!1)return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,e,d]),d.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=t.param(v,p);m&&(g=g?g+"&"+m:m),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+g,e.data=null):e.data=g;var b=[];if(e.resetForm&&b.push(function(){u.resetForm()}),e.clearForm&&b.push(function(){u.clearForm(e.includeHidden)}),!e.dataType&&e.target){var y=e.success||function(){};b.push(function(a){var n=e.replaceTarget?"replaceWith":"html";t(e.target)[n](a).each(y,arguments)})}else e.success&&b.push(e.success);if(e.success=function(t,a,n){for(var r=e.context||this,o=0,i=b.length;i>o;o++)b[o].apply(r,[t,a,n||u,u])},e.error){var x=e.error;e.error=function(t,a,n){var r=e.context||this;x.apply(r,[t,a,n,u])}}if(e.complete){var k=e.complete;e.complete=function(t,a){var n=e.context||this;k.apply(n,[t,a,u])}}var w=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),j=w.length>0,_="multipart/form-data",M=u.attr("enctype")==_||u.attr("encoding")==_,T=r.fileapi&&r.formdata;n("fileAPI :"+T);var S,D=(j||M)&&!T;e.iframe!==!1&&(e.iframe||D)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){S=s(v)}):S=s(v):S=(j||M)&&T?i(v):t.ajax(e),u.removeData("jqxhr").data("jqxhr",S);for(var A=0;A<h.length;A++)h[A]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(r){if(r=r||{},r.delegation=r.delegation&&t.isFunction(t.fn.on),!r.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!t.isReady&&o.s?(n("DOM not ready, queuing ajaxForm"),t(function(){t(o.s,o.c).ajaxForm(r)}),this):(n("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return r.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,r,e).on("click.form-plugin",this.selector,r,a),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,e).bind("click.form-plugin",r,a)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,a){var n=[];if(0===this.length)return n;var o,i=this[0],s=this.attr("id"),l=e?i.getElementsByTagName("*"):i.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=t(l).get()),s&&(o=t(':input[form="'+s+'"]').get(),o.length&&(l=(l||[]).concat(o))),!l||!l.length)return n;var c,f,u,d,p,m,h;for(c=0,m=l.length;m>c;c++)if(p=l[c],u=p.name,u&&!p.disabled)if(e&&i.clk&&"image"==p.type)i.clk==p&&(n.push({name:u,value:t(p).val(),type:p.type}),n.push({name:u+".x",value:i.clk_x},{name:u+".y",value:i.clk_y}));else if(d=t.fieldValue(p,!0),d&&d.constructor==Array)for(a&&a.push(p),f=0,h=d.length;h>f;f++)n.push({name:u,value:d[f]});else if(r.fileapi&&"file"==p.type){a&&a.push(p);var v=p.files;if(v.length)for(f=0;f<v.length;f++)n.push({name:u,value:v[f],type:p.type});else n.push({name:u,value:"",type:p.type})}else null!==d&&"undefined"!=typeof d&&(a&&a.push(p),n.push({name:u,value:d,type:p.type,required:p.required}));if(!e&&i.clk){var g=t(i.clk),b=g[0];u=b.name,u&&!b.disabled&&"image"==b.type&&(n.push({name:u,value:g.val()}),n.push({name:u+".x",value:i.clk_x},{name:u+".y",value:i.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var a=[];return this.each(function(){var n=this.name;if(n){var r=t.fieldValue(this,e);if(r&&r.constructor==Array)for(var o=0,i=r.length;i>o;o++)a.push({name:n,value:r[o]});else null!==r&&"undefined"!=typeof r&&a.push({name:this.name,value:r})}}),t.param(a)},t.fn.fieldValue=function(e){for(var a=[],n=0,r=this.length;r>n;n++){var o=this[n],i=t.fieldValue(o,e);null===i||"undefined"==typeof i||i.constructor==Array&&!i.length||(i.constructor==Array?t.merge(a,i):a.push(i))}return a},t.fieldValue=function(e,a){var n=e.name,r=e.type,o=e.tagName.toLowerCase();if(void 0===a&&(a=!0),a&&(!n||e.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!e.checked||("submit"==r||"image"==r)&&e.form&&e.form.clk!=e||"select"==o&&-1==e.selectedIndex))return null;if("select"==o){var i=e.selectedIndex;if(0>i)return null;for(var s=[],l=e.options,c="select-one"==r,f=c?i+1:l.length,u=c?i:0;f>u;u++){var d=l[u];if(d.selected){var p=d.value;if(p||(p=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),c)return p;s.push(p)}}return s}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,r=this.tagName.toLowerCase();a.test(n)||"textarea"==r?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(n)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var a=this.type;if("checkbox"==a||"radio"==a)this.checked=e;else if("option"==this.tagName.toLowerCase()){var n=t(this).parent("select");e&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e={options:{},init:function(e,n){var r=this;t(document).off("click",e).on("click",e,n,function(e){e.preventDefault(),r.reset();var n=t(this);r.options=t.extend({},a,e.data);var o=r.options.before(n,e.data.params);t.ajax({url:r.options.path,data:o,method:r.options.method||"post",dataType:r.options.datatype||"html",beforeSend:function(e){t("body").append('<div class="bf-loading"></div>')},success:function(e){r.set_template(),r.set_close_event(),t(".bf-modal, .bf-fixed-overlay").css("opacity","0"),t(".bf-modal-box").html(e),t(".bf-loading").remove(),t(".bf-modal, .bf-fixed-overlay").animate({opacity:"1"},500),r.options.after(n,t(".bf-modal-box"),o)}})})},set_template:function(){var e=this;t('[data-rmodal="wrap"]').remove(),t("body").append(e.options.template)},set_close_event:function(){var e=this;t(document).on("click","[data-rmodal='reset']",function(){e.reset(),e.options.reset()}),t(document).on("click",".bf-modal",function(t){t.stopImmediatePropagation()})},reset:function(){t(".bf-fixed-overlay").remove()}},a={path:"",attributes:{},template:'<div data-rmodal="reset" data-rmodal="wrap"  class="bf-fixed-overlay bf-fixed-overlay__modal">                             <div class="bf-modal">                                 <div class="bf-modal_container">                                     <a href="javascript:;" data-rmodal="reset" class="bf-modal-reset" title=""></a>                                       <div class="bf-modal-box"></div>                                 </div>                             </div>                             <small class="bf-modal-after"></small>                         </div>',before:function(t,e){return e},after:function(t,e,a){},reset:function(t,e){}},n={init:function(t,arguments){return e.init(t,arguments)},reset:function(){e.reset()}};t.rmodal=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):e.length>0?n.init.apply(this,arguments):(t.error('Method "'+e+'" not find'),e)}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e={options:{},init:function(a,n){if(t(document).on("mouseover",".bf-tooltip",function(){t(this).remove()}),n.length>0)e.set({el:a,msg:n}),t(window).on("resize",{el:a,msg:n},e.set);else{var r=a.attr("name")||"";r&&t('[data-bf-tooltip-id="'+r+'"]').remove()}},set:function(a){var n,r;a.data?(n=a.data.el,r=a.data.msg):(n=a.el,r=a.msg);var o=n.attr("name")||n.attr("data-name")||"";if(o.length>0){n=t('[name="'+o+'"]:first',n.parents("form"));var i=n.attr("data-bf-tooltip")||n.parents("form").attr("data-bf-tooltip")||e.options.pos;t('[data-bf-tooltip-id="'+o+'"]').remove(),n.after('<span class="bf-tooltip bf-tooltip-'+i+'" data-bf-tooltip-id="'+o+'">                          <span class="bf-arrow"></span>'+r+"</span>"),e.position(n,i)}},reset:function(){t(window).off("resize",e.set),t(".bf-tooltip").remove()},response:function(e,a,n,r,o,i){var s=this;if(i.css("white-space","nowrap"),i.is('[class*="left"]'))e<=s.options.min_dist_border_window&&(i.css("white-space","normal"),e=s.options.min_dist_border_window,i.hasClass("bf-tooltip-left")&&i.removeClass("bf-tooltip-left").addClass("bf-tooltip-bottom-left"));else{var l=e+n+s.options.min_dist_border_window,c=t(window).outerWidth()-s.options.min_dist_border_window-n;l>t(window).outerWidth()&&(e=c,i.hasClass("bf-tooltip-right")&&i.removeClass("bf-tooltip-right").addClass("bf-tooltip-top-right")),c<=r.left&&(i.css("white-space","normal"),e=r.left)}return{top:a,left:e}},position:function(a,n){var r=this;if(a.length>0){var o=a.offset(),i=a.attr("name")||a.attr("data-name")||"",s=t('[data-bf-tooltip-id="'+i+'"]'),l=a.outerHeight(),c=a.outerWidth(),f=s.outerWidth(),u=s.outerHeight(),d=0,p=0;"top"===n?(d=o.top-u,p=o.left+c/2-f/2):"top-right"==n?(p=o.left+c/6*5,d=parseInt(o.top)-parseInt(u)-r.options.dist_from_item):"top-center"===n?(d=o.top-u,p=o.left+c/2):"top-left"===n?(d=parseInt(o.top)-parseInt(u)-r.options.dist_from_item,p=o.left+c/6-f):"bottom"===n?(d=o.top+l,p=o.left+c/2-f/2):"bottom-left"===n?(d=o.top+l,p=o.left+c/6-f):"bottom-center"===n?(d=o.top+l,p=o.left+c/2):"bottom-right"===n?(d=o.top+l,p=o.left+c/6*5):"left"===n?(d=o.top+l/2-u/2,p=o.left-f):"right"===n&&(d=o.top+l/2-u/2,p=o.left+c),s.offset(e.response(p,d,f,o,c,s))}}},a={min_dist_border_window:20,dist_from_item:5,pos:"top-right"},n={init:function(n){var r=t.extend({},a,n);return e.options=r,this.each(function(){if(void 0!==n){var a=n.msg||"";a.length>0&&e.init(t(this),a)}})},reset:function(){e.reset()}};t.fn.rtooltip=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error('Method "'+e+'" not find'):n.init.apply(this,arguments)}}),function(t){"function"==typeof define&&define.amd?define(["jquery","jquery.form.min","jquery.mask.min","jquery.rtooltip","jquery.rmodal"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=window.baseform||{};e=function(){function e(e,a){var n=this,e=e||"",a=a||{};n.defaults={config:"",path:"/rockform/init.php",timer:2e3,fields:{},submit_selector:'[type="submit"], [type="image"], [type="button"]',before_send_form:function(t){},after_send_form:function(t){},before_show_modal:function(){},after_show_modal:function(){},close_modal:function(){}},n.options=t.extend({},n.defaults,a),n.init(e,a)}return e}(),e.prototype.fileupload=function(e){t(document).on("change",".bf-input-file",function(e){var a=t(this),n=a.next("label"),r=n.html(),o="";this.files&&this.files.length>1?o=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value&&(o=e.target.value.split("\\").pop()),o?n.find("span").html(o):n.html(r)})},e.prototype.capcha=function(e){var a=this,n=window.MutationObserver||window.WebKitMutationObserver||"";if(n.length>0){var n=window.MutationObserver||window.WebKitMutationObserver,r=function(e){e.map(function(e){var a=t(e.addedNodes);a.find("img[data-bf-capcha]").click()})},o=new n(r),i={childList:!0,subtree:!0};o.observe(document,i)}var s={init:function(){s.update(),t(document).off("click","img[data-bf-capcha]").on("click","img[data-bf-capcha]",function(){s.update()})},update:function(){t("img[data-bf-capcha]").attr("src",a.options.path+"?type=capcha&u="+Math.random())}};s.init()},e.prototype.mask_fields=function(e){var a="",n={},r={init:function(){t(document).on("focus","[data-bf-mask]",function(){r.set(t(this))}),t("[data-bf-mask]").each(function(){r.set(t(this))})},set:function(t){a=t.data("bf-mask"),n=t.attr("placeholder"),a.length>0&&(("undefined"==typeof n||n.length<1)&&(n=a.replace(/[a-z0-9]+?/gi,"_")),n={placeholder:n},t.mask(a,n))}};r.init()},e.prototype.validation=function(e,a){var n=this,r={init:function(e,a){var o,i;return valid=0,a=a||{},t(".bf-tooltip").rtooltip("reset"),a.mail_to?(t(n.options.submit_selector,e).rtooltip({msg:a.mail_to}),!1):a.filesize?(t(n.options.submit_selector,e).rtooltip({msg:a.filesize}),!1):(t.each(a,function(s,l){o="","token"==s?n.set_attr_form(e,"bf-token",a.token):"filesize"==s||(o=r.set_err_msg(l),i=t('[name="'+s+'"]',e),i.rtooltip({msg:o}),o.length>0&&(valid=1))}),!(parseInt(valid)>0))},set_err_msg:function(e){var a="";return e.required?a=e.required:e.rangelength?a=e.rangelength:e.minlength?a=e.minlength:e.maxlength?a=e.maxlength:t.each(e,function(t,e){if("required"!=t&&"rangelength"!=t&&"minlength"!=t&&"maxlength"!=t)return a=e,!1}),a}};return r.init(e,a)},e.prototype.set_attr_form=function(t,e,a){t.prepend('<input name="'+e+'" class="bf-attr" type="hidden" value="'+a+'" />')},e.prototype.init=function(e,a){var n=this,r={init:function(e,a){n.capcha(),n.mask_fields();var o="",i="",s="";e.length>0?(o=e,i="form"+e+',form[data-delegate="'+e+'"]'):i="form[data-bf]",r.set_form(i),s=e.length>0?e+":not(form)":"[data-bf]:not(form)";var l={config:n.options.config,timer:n.options.timer,fields:n.options.fields};t.rmodal(s,{path:n.options.path,params:l,before:function(e,a){t(".bf-tooltip").rtooltip("reset"),data=e.data("bf")||"","string"==typeof data&&data.length>0&&(data={config:data});var n=r.get_custom_fields(e);data.fields=data.fields||{},data.fields=t.extend({},data.fields,n),a=t.extend({},a,data);var o={data:a.fields,"bf-config":a.config,timer:a.timer,config:a.config,type:"form"};return o},after:function(t,e,a){var n={};n.fields=a.data||{},n.timer=a.timer||{},n.config=a.config||{};var r=JSON.stringify(n);o.length>0?e.find("form").attr("data-delegate",o):e.find("form").attr("data-bf",r)}})},set_form:function(e,a){a=a||n.options,t(document).off("submit",e).on("submit",e,a,function(e){e.preventDefault();var a=t(this);t(".bf-tooltip").rtooltip("reset"),data=a.data("bf")||"","string"==typeof data&&data.length>0&&(data={config:data}),n.options=t.extend({},n.options,e.data,data);var o=a.formToArray(),i=[];t.each(o,function(t,e){"file"==e.type&&(o[t].size=e.value.size||"",o[t].value=e.value.name||"",i.push(o[t].size))}),t.post(n.options.path,{fields:o,type:"validation","bf-config":n.options.config,filesize:i},function(e){e=e||{},n.validation(a,e)&&(n.set_attr_form(a,"bf-config",n.options.config),t.each(n.options.fields,function(t,e){n.set_attr_form(a,"bf[fields]["+t+"]",e)}),a.ajaxSubmit({beforeSubmit:function(e,a,r){n.options.before_send_form(a),t(n.options.submit_selector,a).prop("disabled",!0)},url:n.options.path,type:"post",dataType:"json",success:r.show_response,error:function(t,e,a){alert("Server: "+e)}})),t(".bf-attr").remove()})})},get_custom_fields:function(e){var a={},n="";return e.length&&t.each(e[0].attributes,function(t,e){n=e.name,/data\-bf\-field/.test(n)&&(n=n.replace(/data\-bf\-field(\-|_)/,""),a[n]=e.value)}),a.page_h1=t("h1:first").text()||"",a.page_url=document.location.href,a},show_response:function(e,a,r,o){var i=t(n.options.submit_selector,o);i.prop("disabled",!1).removeAttr("disabled"),parseInt(e.status)>0?(n.options.after_send_form(o),t.post(n.options.path,{type:"form_success","bf-config":e["bf-config"]},function(e){o.hide(),o.after(e),setTimeout(function(){t.rmodal("reset")},n.options.timer),setTimeout(function(){o.show(),o.clearForm(),t("[data-bf-success]").remove()},n.options.timer+1e3)},"html")):i.rtooltip({msg:e.value})}};r.init(e,a)},t.bf=function(t){var a=this,n=arguments[1]||{};return new e(t,n),a},new e});